# UML Class Diagram for Astro Image Colorizer AI

This diagram outlines the primary classes responsible for implementing the application's features.

***

### 1. `AppController`
The central orchestrator that connects the user interface to the backend processing logic.

- **Attributes:**
  - `imageProcessor: ImageProcessor`
  - `historyManager: HistoryManager`
  - `uiState: UIState`
- **Methods:**
  - `loadFile(filePath: string)`
  - `processCurrentImage(modelName: string, paletteName: string)`
  - `adjustImage(params: dict)`
  - `exportImage(format: string)`
  - `viewHistory()`

***

### 2. `ImageProcessor`
Handles the core image processing workflow, from loading data to running the AI model.

- **Attributes:**
  - `inputFITS: FITSData`
  - `outputImage: ProcessedImage`
- **Methods:**
  - `loadFITS(filePath: string): FITSData`
  - `runColorization(model: AIModel, palette: ColorPalette): ProcessedImage`
  - `applyPostProcessing(params: dict)`

***

### 3. `FITSData`
A data class that holds the raw, multi-channel data and metadata from a FITS file.

- **Attributes:**
  - `headerData: dict`
  - `dataCube: array` (e.g., a NumPy array with multiple channels)
- **Methods:**
  - `parseHeader(): dict`
  - `getChannels(): array`
  - `getMetadataString(): string`

***

### 4. `AIModel`
An abstract class representing a trained AI model. Different models can be implemented as subclasses.

- **Attributes:**
  - `modelName: string`
  - `modelPath: string`
- **Methods:**
  - `load()`
  - `predict(inputCube: array, palette: ColorPalette): array` (returns RGB pixel data)

***

### 5. `ProcessedImage`
A class to hold the final, colorized RGB image and handle adjustments.

- **Attributes:**
  - `pixelData: array` (RGB data)
- **Methods:**
  - `adjust(brightness, contrast, saturation)`
  - `getRawPixelData(): array`
  - `exportTo(format: string): file`

***

### 6. `HistoryManager`
Manages the user's processing history for the current session.

- **Attributes:**
  - `historyLog: list[HistoryItem]`
- **Methods:**
  - `addEntry(item: HistoryItem)`
  - `getHistory(): list`
  - `clearHistory()`

***

### 7. `HistoryItem`
A simple data object representing one entry in the history log.

- **Attributes:**
  - `timestamp: datetime`
  - `inputFileName: string`
  - `settingsUsed: dict`
  - `outputThumbnail: image`

***

### Class Relationships (Simplified)

- **`AppController`** is the main class that coordinates all others.
- It uses an **`ImageProcessor`** to perform the core work.
- The **`ImageProcessor`** loads a **`FITSData`** object and uses an **`AIModel`** to produce a **`ProcessedImage`**.
- The **`AppController`** also uses a **`HistoryManager`** to log each session in a **`HistoryItem`**.