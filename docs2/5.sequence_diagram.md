# Sequence Diagram Explanation

### Phase 1. File Upload and Loading
This phase describes the system's response when a user uploads a file.

1.  The **:User** initiates the process by calling `loadFile(filePath)` on the **:AppController**.
2.  The **:AppController** delegates this task by calling `loadFITS(filePath)` on the **:ImageProcessor**.
3.  The **:ImageProcessor** then creates a new **:FITSData** object.
4.  The newly created **:FITSData** object parses itself, loading the scientific data and metadata from the file.
5.  Control is returned to the **:User** once the file is successfully loaded into the system.

***

### Phase 2. Image Processing
This phase is triggered when the user decides to colorize the loaded image.

1.  The **:User** calls `processCurrentImage(model, palette)` on the **:AppController**.
2.  The **:AppController** instructs the **:ImageProcessor** to begin by calling `runColorization(model, palette)`.
3.  The **:ImageProcessor** invokes the `predict()` method on the selected **:AIModel**, passing the raw data from the **:FITSData** object.
4.  The **:AIModel** returns the processed pixel data.
5.  The **:ImageProcessor** uses this data to create a new **:ProcessedImage** object, which holds the final color image.

***

### Phase 3. Finalization and History Logging
This phase occurs immediately after the image has been successfully processed.

1.  The still-active **:AppController** calls `addEntry(item)` on the **:HistoryManager** to log the session.
2.  The **:HistoryManager** creates a new **:HistoryItem** object containing details of the session (e.g., filename, settings).
3.  Finally, the **:AppController** updates the user interface by calling `displayResults()`, showing the final colorized image to the **:User**.